<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-11-04T18:04:18.280413"><meta name="build-number" content="${buildNumber}">       <title>Building blocks | Dapr demo</title><script id="virtual-toc-data" type="application/json">[{"id":"invoking-external-services-with-dapr-building-blocks","level":0,"title":"Invoking external services with dapr building blocks","anchor":"#invoking-external-services-with-dapr-building-blocks"},{"id":"gotchas","level":0,"title":"Gotchas","anchor":"#gotchas"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Building blocks | Dapr demo"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Dapr demo Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="building-blocks.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Building blocks | Dapr demo"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "building-blocks.html#webpage", "url": "building-blocks.html", "name": "Building blocks | Dapr demo", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/#website", "url": "/", "name": "Dapr demo Help" }</script><!-- End Schema.org --> <!-- Mermaid light/dark themes -->  <link rel="stylesheet" type="text/css" href="mermaid.css">  </head>     <body data-id="Building-blocks" data-main-title="Building blocks" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Introduction.md|Introduction"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Dapr demo  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Building-blocks"  id="Building-blocks.md"  >Building blocks</h1>  <p id="8f818eab_1739">Dapr building blocks are abstractions on top of typical distributed capabilities that your applications need, such as service-to-service invocations, sending and receiving event messages, and dealing with cloud-vendor specific services.</p><p id="8f818eab_1740">Building blocks are platform-agnostic and language-independent APIs that standardize common tasks.</p><p id="8f818eab_1741">By utilizing these building blocks, you can make your applications portable across different environments (e.g., edge, hybrid, multi-cloud, Kubernetes, or any physical infrastructure) with no code changes required. This results in a significant simplification of your codebase, improved productivity, and reduced risk of bugs or security issues.</p><section class="chapter"><h2 id="invoking-external-services-with-dapr-building-blocks" data-toc="invoking-external-services-with-dapr-building-blocks">Invoking external services with dapr building blocks</h2><p id="8f818eab_1742">An external service may be anything that is external to the application itself. Instead of having the application know where and how to communicate with an external service, the application simply delegates that responsibility to its dapr sidecar.</p><p id="8f818eab_1743">That means, your application just needs to know the location of its sidecar: <code class="code" id="8f818eab_1744">http://localhost:&lt;dapr-sidecar-port&gt;</code>.</p><aside class="prompt" data-type="note" data-title="" id="8f818eab_1745"><p id="8f818eab_1746">It's your job to know how to call building blocks their available services.</p></aside><section class="chapter"><h3 id="url-structure-and-calling-services" data-toc="url-structure-and-calling-services">URL structure and calling services</h3><p id="8f818eab_1747">Luckily, the URL structure follows (mostly) the same pattern for all service calls you'll need to do.</p><p id="8f818eab_1748"><code class="code" id="8f818eab_1749">http://localhost:&lt;dapr-sidecar-port&gt;/v1.0/&lt;building-block&gt;/&lt;component-name&gt;/&lt;method&gt;</code></p><p id="8f818eab_1750">This is a nice convenience when you want to test if things are working properly. Since it's all HTTP or gRPC calls to the sidecar, you can use <code class="code" id="8f818eab_1751">curl</code> to mimic what your application would be doing.</p><section class="chapter"><h4 id="example-calls" data-toc="example-calls">Example calls</h4><p id="8f818eab_1752">Here are some examples of how to call typical building blocks from your application or by using <code class="code" id="8f818eab_1753">curl</code>:</p><ul class="list _ul" id="8f818eab_1754"    ><li class="list__item" id="8f818eab_1755"><p>Service-to-service: <code class="code" id="8f818eab_1756">POST http://localhost:3500/v1.0/invoke/cart/method/neworder</code></p></li><li class="list__item" id="8f818eab_1757"><p>State: <code class="code" id="8f818eab_1758">GET http://localhost:3500/v1.0/state/inventory/item67</code></p></li><li class="list__item" id="8f818eab_1759"><p>Pubsub: <code class="code" id="8f818eab_1760">POST http://localhost:3500/v1.0/publish/shipping/order</code></p></li><li class="list__item" id="8f818eab_1761"><p>Secrets: <code class="code" id="8f818eab_1762">GET http://localhost:3500/v1.0/secrets/vault/password42</code></p></li></ul><p id="8f818eab_1763">Notice that all calls are made to <code class="code" id="8f818eab_1764">localhost</code> on port <code class="code" id="8f818eab_1765">3500</code>. This is the dapr sidecar that'll receive the call and requests on behalf of your application.</p><aside class="prompt" data-type="tip" data-title="" id="8f818eab_1766"><p id="8f818eab_1767">The dapr sidecar may run on any port, but HTTP port 3500 and gRPC port 60000 has become a convention.</p></aside></section></section></section><section class="chapter"><h2 id="gotchas" data-toc="gotchas">Gotchas</h2><section class="chapter"><h3 id="service-was-not-found-error" data-toc="service-was-not-found-error">Service was not found error</h3><p id="8f818eab_1768">When developing locally, the dapr sidecar will announce itself using multicast DNS, which is a way to do service discovery locally.</p><p id="8f818eab_1769">If you have a VPN such as AnyConnect, you may run into issues because the VPN client installs a filter which blocks UDP packets. mDNS uses UDP, so the dapr sidecar never gets to announce itself.</p><p id="8f818eab_1770">I've found that uninstalling the filter solved the issue.</p></section></section><div class="last-modified"> Last modified: 04 November 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="dapr-sidecar.html">Dapr sidecar</a>   <a class="navigation-links__next" href="components.html">Components</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.1.5-b176/app.js"></script></body></html>